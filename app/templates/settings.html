{% extends "base.html" %}
{% block content %}
<div class="max-w-7xl mx-auto mt-6 px-4">

    <div class="flex flex-col md:flex-row justify-between items-end mb-8 pb-4 border-b border-gray-800">
        <div>
            <h2 class="text-3xl font-bold text-white tracking-tight">Settings & Control</h2>
            <p class="text-gray-400 text-sm mt-1">Manage rates, vendors, and system access.</p>
        </div>

        <div class="flex gap-2 mt-4 md:mt-0 bg-black/40 p-1 rounded-lg border border-white/10">
            <button onclick="showTab('vendors')" id="tab-btn-vendors" class="px-4 py-2 text-xs font-bold rounded transition bg-blue-600 text-white shadow-lg">
                VENDOR MASTER
            </button>

            {% if current_user.is_admin %}
            <button onclick="showTab('users')" id="tab-btn-users" class="px-4 py-2 text-xs font-bold rounded transition text-gray-400 hover:text-white hover:bg-white/5">
                USER ACCESS
            </button>
            <button onclick="showTab('audit')" id="tab-btn-audit" class="px-4 py-2 text-xs font-bold rounded transition text-gray-400 hover:text-white hover:bg-white/5">
                AUDIT LOGS
            </button>
            <button onclick="showTab('system')" id="tab-btn-system" class="px-4 py-2 text-xs font-bold rounded transition text-gray-400 hover:text-white hover:bg-white/5">
                SYSTEM DATA
            </button>
            {% endif %}
        </div>
    </div>

    <div id="tab-vendors" class="tab-content block">
        {% include "settings_tabs/vendors.html" %}
    </div>

    {% if current_user.is_admin %}
    <div id="tab-users" class="tab-content hidden">
        {% include "settings_tabs/users.html" %}
    </div>

    <div id="tab-audit" class="tab-content hidden">
        {% include "settings_tabs/audit.html" %}
    </div>

    <div id="tab-system" class="tab-content hidden">
        {% include "settings_tabs/system.html" %}
    </div>
    {% endif %}

</div>

<script>
    function showTab(tabName) {
        // Hide all contents
        document.querySelectorAll('.tab-content').forEach(el => {
            el.classList.add('hidden');
            el.classList.remove('block');
        });

        // Reset all buttons
        const btns = document.querySelectorAll('button[id^="tab-btn-"]');
        btns.forEach(btn => {
            btn.classList.remove('bg-blue-600', 'text-white', 'shadow-lg');
            btn.classList.add('text-gray-400', 'hover:text-white');
        });

        // Show selected content
        const activeTab = document.getElementById('tab-' + tabName);
        if(activeTab) {
            activeTab.classList.remove('hidden');
            activeTab.classList.add('block');
        }

        // Highlight selected button
        const activeBtn = document.getElementById('tab-btn-' + tabName);
        if(activeBtn) {
            activeBtn.classList.remove('text-gray-400', 'hover:text-white');
            activeBtn.classList.add('bg-blue-600', 'text-white', 'shadow-lg');
        }
    }
</script>
{% endblock %}